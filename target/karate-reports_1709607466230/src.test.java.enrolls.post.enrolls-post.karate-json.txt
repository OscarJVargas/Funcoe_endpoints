{"failedCount":1,"prefixedPath":"src\/test\/java\/enrolls\/post\/enrolls-post.feature","packageQualifiedName":"src.test.java.enrolls.post.enrolls-post","loopIndex":-1,"relativePath":"src\/test\/java\/enrolls\/post\/enrolls-post.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2771601500,"errorMessage":"status code was: 500, expected: 200, response time in milliseconds: 2142, url: https:\/\/funcoeback-dev-ceqh.3.us-1.fl0.io\/users\/token\/, response: \nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\npymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 762, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 782, in app\n    await route.handle(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 297, in handle\n    await self.app(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 77, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 72, in app\n    response = await func(request)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 299, in app\n    raise e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 294, in app\n    raw_response = await run_endpoint_function(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 193, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/concurrency.py\", line 40, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 2134, in run_sync_in_worker_thread\n    return await future\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 851, in run\n    result = context.run(func, *args)\n  File \"\/workspace\/app\/routes\/user.py\", line 19, in get_token\n    if validate_user(user):\n  File \"\/workspace\/app\/func\/user.py\", line 28, in validate_user\n    if r1 is not None and data.password == pass_decrypt and r1.is_active == 1 and get_rol(r1.rol_uuid) == 'admin':\n  File \"\/workspace\/app\/func\/rol.py\", line 8, in get_rol\n    r1=db.query(Role).where(Role.uuid_rol==id_rol).first()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2748, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2847, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2308, in execute\n    return self._execute_internal(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2190, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/context.py\", line 293, in orm_execute_statement\n    result = conn.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1416, in execute\n    return meth(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/sql\/elements.py\", line 517, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 2344, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\nsqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')\n[SQL: SELECT roles.uuid_rol AS roles_uuid_rol, roles.rol AS roles_rol, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at \nFROM roles \nWHERE roles.uuid_rol = %(uuid_rol_1)s \n LIMIT %(param_1)s]\n[parameters: {'uuid_rol_1': 'da6669bd-e15a-4d06-bc01-a4d0d227e738', 'param_1': 1}]\n(Background on this error at: https:\/\/sqlalche.me\/e\/20\/e3q8)\n\nsrc\/test\/java\/enrolls\/post\/..\/..\/user\/token\/users-token-post.feature:9\nsrc\/test\/java\/enrolls\/post\/enrolls-post.feature:4","millis":2771.6015,"status":"failed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"call read(\"..\/..\/user\/token\/users-token-post.feature@token\")"},"stepLog":"21:57:23.027 src\/test\/java\/enrolls\/post\/enrolls-post.feature:4\n* call read(\"..\/..\/user\/token\/users-token-post.feature@token\")\nstatus code was: 500, expected: 200, response time in milliseconds: 2142, url: https:\/\/funcoeback-dev-ceqh.3.us-1.fl0.io\/users\/token\/, response: \nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\npymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 762, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 782, in app\n    await route.handle(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 297, in handle\n    await self.app(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 77, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 72, in app\n    response = await func(request)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 299, in app\n    raise e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 294, in app\n    raw_response = await run_endpoint_function(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 193, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/concurrency.py\", line 40, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 2134, in run_sync_in_worker_thread\n    return await future\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 851, in run\n    result = context.run(func, *args)\n  File \"\/workspace\/app\/routes\/user.py\", line 19, in get_token\n    if validate_user(user):\n  File \"\/workspace\/app\/func\/user.py\", line 28, in validate_user\n    if r1 is not None and data.password == pass_decrypt and r1.is_active == 1 and get_rol(r1.rol_uuid) == 'admin':\n  File \"\/workspace\/app\/func\/rol.py\", line 8, in get_rol\n    r1=db.query(Role).where(Role.uuid_rol==id_rol).first()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2748, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2847, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2308, in execute\n    return self._execute_internal(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2190, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/context.py\", line 293, in orm_execute_statement\n    result = conn.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1416, in execute\n    return meth(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/sql\/elements.py\", line 517, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 2344, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\nsqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')\n[SQL: SELECT roles.uuid_rol AS roles_uuid_rol, roles.rol AS roles_rol, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at \nFROM roles \nWHERE roles.uuid_rol = %(uuid_rol_1)s \n LIMIT %(param_1)s]\n[parameters: {'uuid_rol_1': 'da6669bd-e15a-4d06-bc01-a4d0d227e738', 'param_1': 1}]\n(Background on this error at: https:\/\/sqlalche.me\/e\/20\/e3q8)\n\nsrc\/test\/java\/enrolls\/post\/..\/..\/user\/token\/users-token-post.feature:9\nsrc\/test\/java\/enrolls\/post\/enrolls-post.feature:4\n","callResults":[{"failedCount":1,"prefixedPath":"src\/test\/java\/enrolls\/post\/..\/..\/user\/token\/users-token-post.feature","packageQualifiedName":"src.test.java.enrolls.post.user.token.users-token-post","loopIndex":-1,"relativePath":"src\/test\/java\/enrolls\/post\/..\/..\/user\/token\/users-token-post.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":3307900,"millis":3.3079,"status":"passed"},"step":{"line":6,"prefix":"Given","index":0,"text":"url \"https:\/\/funcoeback-dev-ceqh.3.us-1.fl0.io\/users\/token\/\""}},{"result":{"nanos":45751100,"millis":45.7511,"status":"passed"},"step":{"line":7,"prefix":"And","index":1,"text":"request {\"user\": \"ruben1\", \"password\": \"ruben123\"}"}},{"result":{"nanos":2556932700,"millis":2556.9327,"status":"passed"},"step":{"line":8,"prefix":"When","index":2,"text":"method post"},"stepLog":"21:57:20.871 request:\n1 > POST https:\/\/funcoeback-dev-ceqh.3.us-1.fl0.io\/users\/token\/\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: funcoeback-dev-ceqh.3.us-1.fl0.io\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/21.0.2)\n1 > Accept-Encoding: gzip,deflate\n{\"user\":\"ruben1\",\"password\":\"ruben123\"}\n\n21:57:23.015 response time in milliseconds: 2142\n1 < 500\n1 < date: Tue, 05 Mar 2024 02:57:21 GMT\n1 < server: envoy\n1 < content-length: 9400\n1 < content-type: text\/plain; charset=utf-8\n1 < x-envoy-upstream-service-time: 1414\nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\npymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 762, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 782, in app\n    await route.handle(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 297, in handle\n    await self.app(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 77, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 72, in app\n    response = await func(request)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 299, in app\n    raise e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 294, in app\n    raw_response = await run_endpoint_function(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 193, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/concurrency.py\", line 40, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 2134, in run_sync_in_worker_thread\n    return await future\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 851, in run\n    result = context.run(func, *args)\n  File \"\/workspace\/app\/routes\/user.py\", line 19, in get_token\n    if validate_user(user):\n  File \"\/workspace\/app\/func\/user.py\", line 28, in validate_user\n    if r1 is not None and data.password == pass_decrypt and r1.is_active == 1 and get_rol(r1.rol_uuid) == 'admin':\n  File \"\/workspace\/app\/func\/rol.py\", line 8, in get_rol\n    r1=db.query(Role).where(Role.uuid_rol==id_rol).first()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2748, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2847, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2308, in execute\n    return self._execute_internal(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2190, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/context.py\", line 293, in orm_execute_statement\n    result = conn.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1416, in execute\n    return meth(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/sql\/elements.py\", line 517, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 2344, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\nsqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')\n[SQL: SELECT roles.uuid_rol AS roles_uuid_rol, roles.rol AS roles_rol, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at \nFROM roles \nWHERE roles.uuid_rol = %(uuid_rol_1)s \n LIMIT %(param_1)s]\n[parameters: {'uuid_rol_1': 'da6669bd-e15a-4d06-bc01-a4d0d227e738', 'param_1': 1}]\n(Background on this error at: https:\/\/sqlalche.me\/e\/20\/e3q8)\n\n\n"},{"result":{"nanos":4013700,"errorMessage":"status code was: 500, expected: 200, response time in milliseconds: 2142, url: https:\/\/funcoeback-dev-ceqh.3.us-1.fl0.io\/users\/token\/, response: \nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\npymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 762, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 782, in app\n    await route.handle(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 297, in handle\n    await self.app(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 77, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 72, in app\n    response = await func(request)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 299, in app\n    raise e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 294, in app\n    raw_response = await run_endpoint_function(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 193, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/concurrency.py\", line 40, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 2134, in run_sync_in_worker_thread\n    return await future\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 851, in run\n    result = context.run(func, *args)\n  File \"\/workspace\/app\/routes\/user.py\", line 19, in get_token\n    if validate_user(user):\n  File \"\/workspace\/app\/func\/user.py\", line 28, in validate_user\n    if r1 is not None and data.password == pass_decrypt and r1.is_active == 1 and get_rol(r1.rol_uuid) == 'admin':\n  File \"\/workspace\/app\/func\/rol.py\", line 8, in get_rol\n    r1=db.query(Role).where(Role.uuid_rol==id_rol).first()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2748, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2847, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2308, in execute\n    return self._execute_internal(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2190, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/context.py\", line 293, in orm_execute_statement\n    result = conn.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1416, in execute\n    return meth(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/sql\/elements.py\", line 517, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 2344, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\nsqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')\n[SQL: SELECT roles.uuid_rol AS roles_uuid_rol, roles.rol AS roles_rol, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at \nFROM roles \nWHERE roles.uuid_rol = %(uuid_rol_1)s \n LIMIT %(param_1)s]\n[parameters: {'uuid_rol_1': 'da6669bd-e15a-4d06-bc01-a4d0d227e738', 'param_1': 1}]\n(Background on this error at: https:\/\/sqlalche.me\/e\/20\/e3q8)\n\nsrc\/test\/java\/enrolls\/post\/..\/..\/user\/token\/users-token-post.feature:9","millis":4.0137,"status":"failed"},"step":{"line":9,"prefix":"Then","index":3,"text":"status 200"},"stepLog":"21:57:23.021 src\/test\/java\/enrolls\/post\/..\/..\/user\/token\/users-token-post.feature:9\nThen status 200\nstatus code was: 500, expected: 200, response time in milliseconds: 2142, url: https:\/\/funcoeback-dev-ceqh.3.us-1.fl0.io\/users\/token\/, response: \nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\npymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 762, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 782, in app\n    await route.handle(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 297, in handle\n    await self.app(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 77, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 72, in app\n    response = await func(request)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 299, in app\n    raise e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 294, in app\n    raw_response = await run_endpoint_function(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 193, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/concurrency.py\", line 40, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 2134, in run_sync_in_worker_thread\n    return await future\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 851, in run\n    result = context.run(func, *args)\n  File \"\/workspace\/app\/routes\/user.py\", line 19, in get_token\n    if validate_user(user):\n  File \"\/workspace\/app\/func\/user.py\", line 28, in validate_user\n    if r1 is not None and data.password == pass_decrypt and r1.is_active == 1 and get_rol(r1.rol_uuid) == 'admin':\n  File \"\/workspace\/app\/func\/rol.py\", line 8, in get_rol\n    r1=db.query(Role).where(Role.uuid_rol==id_rol).first()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2748, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2847, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2308, in execute\n    return self._execute_internal(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2190, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/context.py\", line 293, in orm_execute_statement\n    result = conn.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1416, in execute\n    return meth(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/sql\/elements.py\", line 517, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 2344, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\nsqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')\n[SQL: SELECT roles.uuid_rol AS roles_uuid_rol, roles.rol AS roles_rol, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at \nFROM roles \nWHERE roles.uuid_rol = %(uuid_rol_1)s \n LIMIT %(param_1)s]\n[parameters: {'uuid_rol_1': 'da6669bd-e15a-4d06-bc01-a4d0d227e738', 'param_1': 1}]\n(Background on this error at: https:\/\/sqlalche.me\/e\/20\/e3q8)\n\nsrc\/test\/java\/enrolls\/post\/..\/..\/user\/token\/users-token-post.feature:9\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":10,"prefix":"*","index":4,"text":"def token = $.access_token"}}],"line":5,"description":"","durationMillis":2610.0054,"failed":true,"error":"status code was: 500, expected: 200, response time in milliseconds: 2142, url: https:\/\/funcoeback-dev-ceqh.3.us-1.fl0.io\/users\/token\/, response: \nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\npymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 762, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 782, in app\n    await route.handle(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 297, in handle\n    await self.app(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 77, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 72, in app\n    response = await func(request)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 299, in app\n    raise e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 294, in app\n    raw_response = await run_endpoint_function(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 193, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/concurrency.py\", line 40, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 2134, in run_sync_in_worker_thread\n    return await future\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 851, in run\n    result = context.run(func, *args)\n  File \"\/workspace\/app\/routes\/user.py\", line 19, in get_token\n    if validate_user(user):\n  File \"\/workspace\/app\/func\/user.py\", line 28, in validate_user\n    if r1 is not None and data.password == pass_decrypt and r1.is_active == 1 and get_rol(r1.rol_uuid) == 'admin':\n  File \"\/workspace\/app\/func\/rol.py\", line 8, in get_rol\n    r1=db.query(Role).where(Role.uuid_rol==id_rol).first()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2748, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2847, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2308, in execute\n    return self._execute_internal(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2190, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/context.py\", line 293, in orm_execute_statement\n    result = conn.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1416, in execute\n    return meth(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/sql\/elements.py\", line 517, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 2344, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\nsqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')\n[SQL: SELECT roles.uuid_rol AS roles_uuid_rol, roles.rol AS roles_rol, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at \nFROM roles \nWHERE roles.uuid_rol = %(uuid_rol_1)s \n LIMIT %(param_1)s]\n[parameters: {'uuid_rol_1': 'da6669bd-e15a-4d06-bc01-a4d0d227e738', 'param_1': 1}]\n(Background on this error at: https:\/\/sqlalche.me\/e\/20\/e3q8)\n\nsrc\/test\/java\/enrolls\/post\/..\/..\/user\/token\/users-token-post.feature:9","tags":["token"],"executorName":"main","name":"Post a token","startTime":1709607440407,"refId":"[1:5]","endTime":1709607443021,"exampleIndex":-1}],"callDepth":1,"name":"JWT Token Feature","description":"","resultDate":"2024-03-04 09:57:23 p.\u202Fm.","durationMillis":2610.0054,"passedCount":0}]},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"header Authorization = \"Bearer \" + token"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"print token"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":11,"prefix":"*","index":0,"text":"def randomamount =  Math.floor(Math.random() * 10000) + 1"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":12,"prefix":"*","index":1,"text":"def randomoutstanding_balance =  Math.floor(Math.random() * 1000000) + 1"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":13,"prefix":"*","index":2,"text":"def randompositive_balance =  Math.floor(Math.random() * 10000000) + 1"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":14,"prefix":"*","index":3,"text":"def randomdues =  Math.floor(Math.random() * 10000000000) + 1"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":15,"prefix":"*","index":4,"text":"def randomnumber_of_installments =  Math.floor(Math.random() * 100000000) + 1"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":16,"prefix":"*","index":5,"text":"def installment_value =  Math.floor(Math.random() * 1000000000) + 1"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":17,"prefix":"Given","index":6,"text":"url \"https:\/\/funcoeback-dev-ceqh.3.us-1.fl0.io\/enrolls\/\""}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":18,"prefix":"And","index":7,"text":"request {\"uuid_enroll\": '#(enrollId)',\"student_uuid\": '#(studentsId)', \"program_uuid\": '#(programsId)', \"semester_uuid\": '#(semesterId)', \"amount\": '#(randomamount)', \"outstanding_balance\": '#(randomoutstanding_balance)', \"positive_balance\": '#(randompositive_balance)', \"dues\": '#(randomdues)', \"number_of_installments\": '#(randomnumber_of_installments)', \"installment_value\": '#(installment_value)'}"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":19,"prefix":"When","index":8,"text":"method post"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":20,"prefix":"Then","index":9,"text":"status 200"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":21,"prefix":"*","index":10,"text":"def enrollsId = $.uuid_enroll"}},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":22,"prefix":"*","index":11,"text":"print enrollId"}}],"line":10,"description":"","durationMillis":2771.6015,"failed":true,"error":"status code was: 500, expected: 200, response time in milliseconds: 2142, url: https:\/\/funcoeback-dev-ceqh.3.us-1.fl0.io\/users\/token\/, response: \nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\npymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/middleware\/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 762, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 782, in app\n    await route.handle(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 297, in handle\n    await self.app(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 77, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 64, in wrapped_app\n    raise exc\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/_exception_handler.py\", line 53, in wrapped_app\n    await app(scope, receive, sender)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/routing.py\", line 72, in app\n    response = await func(request)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 299, in app\n    raise e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 294, in app\n    raw_response = await run_endpoint_function(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/fastapi\/routing.py\", line 193, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/starlette\/concurrency.py\", line 40, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func, *args)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/to_thread.py\", line 56, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 2134, in run_sync_in_worker_thread\n    return await future\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/anyio\/_backends\/_asyncio.py\", line 851, in run\n    result = context.run(func, *args)\n  File \"\/workspace\/app\/routes\/user.py\", line 19, in get_token\n    if validate_user(user):\n  File \"\/workspace\/app\/func\/user.py\", line 28, in validate_user\n    if r1 is not None and data.password == pass_decrypt and r1.is_active == 1 and get_rol(r1.rol_uuid) == 'admin':\n  File \"\/workspace\/app\/func\/rol.py\", line 8, in get_rol\n    r1=db.query(Role).where(Role.uuid_rol==id_rol).first()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2748, in first\n    return self.limit(1)._iter().first()  # type: ignore\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/query.py\", line 2847, in _iter\n    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2308, in execute\n    return self._execute_internal(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/session.py\", line 2190, in _execute_internal\n    result: Result[Any] = compile_state_cls.orm_execute_statement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/orm\/context.py\", line 293, in orm_execute_statement\n    result = conn.execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1416, in execute\n    return meth(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/sql\/elements.py\", line 517, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1639, in _execute_clauseelement\n    ret = self._execute_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1848, in _execute_context\n    return self._exec_single_context(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1988, in _exec_single_context\n    self._handle_dbapi_exception(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 2344, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/base.py\", line 1969, in _exec_single_context\n    self.dialect.do_execute(\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/sqlalchemy\/engine\/default.py\", line 922, in do_execute\n    cursor.execute(statement, parameters)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 153, in execute\n    result = self._query(query)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/cursors.py\", line 322, in _query\n    conn.query(q)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 558, in query\n    self._affected_rows = self._read_query_result(unbuffered=unbuffered)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 822, in _read_query_result\n    result.read()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 1200, in read\n    first_packet = self.connection._read_packet()\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 739, in _read_packet\n    packet_header = self._read_bytes(4)\n  File \"\/layers\/paketo-buildpacks_pip-install\/packages\/lib\/python3.10\/site-packages\/pymysql\/connections.py\", line 795, in _read_bytes\n    raise err.OperationalError(\nsqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query')\n[SQL: SELECT roles.uuid_rol AS roles_uuid_rol, roles.rol AS roles_rol, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at \nFROM roles \nWHERE roles.uuid_rol = %(uuid_rol_1)s \n LIMIT %(param_1)s]\n[parameters: {'uuid_rol_1': 'da6669bd-e15a-4d06-bc01-a4d0d227e738', 'param_1': 1}]\n(Background on this error at: https:\/\/sqlalche.me\/e\/20\/e3q8)\n\nsrc\/test\/java\/enrolls\/post\/..\/..\/user\/token\/users-token-post.feature:9\nsrc\/test\/java\/enrolls\/post\/enrolls-post.feature:4","tags":["createenrolls"],"executorName":"main","name":"Post on enrolls","startTime":1709607440242,"refId":"[1:10]","endTime":1709607443027,"exampleIndex":-1}],"callDepth":0,"name":"Post concepts on enrolls","description":"","resultDate":"2024-03-04 09:57:23 p.\u202Fm.","durationMillis":2771.6015,"passedCount":0}